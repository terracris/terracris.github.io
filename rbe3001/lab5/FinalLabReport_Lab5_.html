<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=sDU-RIIs3Wq_4pUcDwWu-05zdwzqyXAFhQ3EpAK6bTA);.lst-kix_f55kr1562bos-6>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-6,decimal) ". "}ol.lst-kix_ye9yywojzc8x-4.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-4 0}.lst-kix_f55kr1562bos-5>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-5,lower-roman) ". "}.lst-kix_f55kr1562bos-7>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-7,lower-latin) ". "}.lst-kix_f55kr1562bos-4>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-4,lower-latin) ". "}.lst-kix_f55kr1562bos-8>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-8,lower-roman) ". "}ol.lst-kix_f55kr1562bos-1.start{counter-reset:lst-ctn-kix_f55kr1562bos-1 0}.lst-kix_f55kr1562bos-2>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-2,lower-roman) ". "}.lst-kix_f55kr1562bos-1>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-1,lower-latin) ". "}.lst-kix_f55kr1562bos-3>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-3,decimal) ". "}.lst-kix_f55kr1562bos-5>li{counter-increment:lst-ctn-kix_f55kr1562bos-5}ol.lst-kix_176rgz1bs3nm-5.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-5 0}.lst-kix_176rgz1bs3nm-0>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-0}ol.lst-kix_176rgz1bs3nm-8.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-8 0}.lst-kix_aymaoiw5ape5-8>li:before{content:"\0025cf   "}.lst-kix_doqtdunxf5m9-7>li:before{content:"\0025cb   "}.lst-kix_f55kr1562bos-6>li{counter-increment:lst-ctn-kix_f55kr1562bos-6}.lst-kix_doqtdunxf5m9-8>li:before{content:"\0025a0   "}.lst-kix_f55kr1562bos-4>li{counter-increment:lst-ctn-kix_f55kr1562bos-4}ol.lst-kix_ye9yywojzc8x-0{list-style-type:none}.lst-kix_f55kr1562bos-7>li{counter-increment:lst-ctn-kix_f55kr1562bos-7}ul.lst-kix_aymaoiw5ape5-1{list-style-type:none}.lst-kix_doqtdunxf5m9-3>li:before{content:"\0025cf   "}.lst-kix_doqtdunxf5m9-5>li:before{content:"\0025a0   "}ul.lst-kix_aymaoiw5ape5-0{list-style-type:none}ul.lst-kix_aymaoiw5ape5-3{list-style-type:none}ul.lst-kix_aymaoiw5ape5-2{list-style-type:none}ul.lst-kix_aymaoiw5ape5-5{list-style-type:none}.lst-kix_doqtdunxf5m9-2>li:before{content:"\0025a0   "}.lst-kix_doqtdunxf5m9-6>li:before{content:"\0025cf   "}ul.lst-kix_aymaoiw5ape5-4{list-style-type:none}ol.lst-kix_ye9yywojzc8x-6{list-style-type:none}ol.lst-kix_f55kr1562bos-7.start{counter-reset:lst-ctn-kix_f55kr1562bos-7 0}ul.lst-kix_aymaoiw5ape5-7{list-style-type:none}ol.lst-kix_ye9yywojzc8x-5{list-style-type:none}ul.lst-kix_aymaoiw5ape5-6{list-style-type:none}ol.lst-kix_ye9yywojzc8x-8{list-style-type:none}ol.lst-kix_ye9yywojzc8x-7{list-style-type:none}ul.lst-kix_aymaoiw5ape5-8{list-style-type:none}ol.lst-kix_ye9yywojzc8x-2{list-style-type:none}ol.lst-kix_ye9yywojzc8x-1{list-style-type:none}ol.lst-kix_ye9yywojzc8x-7.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-7 0}ol.lst-kix_ye9yywojzc8x-4{list-style-type:none}ol.lst-kix_ye9yywojzc8x-3{list-style-type:none}.lst-kix_doqtdunxf5m9-4>li:before{content:"\0025cb   "}.lst-kix_ye9yywojzc8x-7>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-7}ol.lst-kix_176rgz1bs3nm-2.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-2 0}ol.lst-kix_ye9yywojzc8x-1.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-1 0}ol.lst-kix_f55kr1562bos-4.start{counter-reset:lst-ctn-kix_f55kr1562bos-4 0}.lst-kix_doqtdunxf5m9-1>li:before{content:"\0025cb   "}.lst-kix_176rgz1bs3nm-2>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-2}.lst-kix_doqtdunxf5m9-0>li:before{content:"\0025cf   "}.lst-kix_176rgz1bs3nm-8>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-8}ol.lst-kix_f55kr1562bos-3.start{counter-reset:lst-ctn-kix_f55kr1562bos-3 0}ol.lst-kix_176rgz1bs3nm-8{list-style-type:none}ol.lst-kix_ye9yywojzc8x-6.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-6 0}.lst-kix_f55kr1562bos-8>li{counter-increment:lst-ctn-kix_f55kr1562bos-8}ol.lst-kix_176rgz1bs3nm-6{list-style-type:none}ol.lst-kix_176rgz1bs3nm-7{list-style-type:none}ol.lst-kix_176rgz1bs3nm-4{list-style-type:none}ol.lst-kix_176rgz1bs3nm-5{list-style-type:none}.lst-kix_f55kr1562bos-2>li{counter-increment:lst-ctn-kix_f55kr1562bos-2}ol.lst-kix_176rgz1bs3nm-2{list-style-type:none}ol.lst-kix_176rgz1bs3nm-3{list-style-type:none}ol.lst-kix_f55kr1562bos-1{list-style-type:none}ol.lst-kix_f55kr1562bos-0{list-style-type:none}ol.lst-kix_f55kr1562bos-5{list-style-type:none}.lst-kix_ye9yywojzc8x-2>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-2,lower-roman) ". "}ol.lst-kix_f55kr1562bos-4{list-style-type:none}ol.lst-kix_f55kr1562bos-3{list-style-type:none}ol.lst-kix_f55kr1562bos-2{list-style-type:none}ol.lst-kix_176rgz1bs3nm-3.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-3 0}.lst-kix_ye9yywojzc8x-3>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-3,decimal) ". "}.lst-kix_ye9yywojzc8x-4>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-4,lower-latin) ". "}ol.lst-kix_f55kr1562bos-8{list-style-type:none}.lst-kix_176rgz1bs3nm-7>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-7}ol.lst-kix_f55kr1562bos-7{list-style-type:none}ol.lst-kix_f55kr1562bos-6{list-style-type:none}.lst-kix_ye9yywojzc8x-5>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-5,lower-roman) ". "}.lst-kix_ye9yywojzc8x-7>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-7,lower-latin) ". "}.lst-kix_ye9yywojzc8x-8>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-8,lower-roman) ". "}.lst-kix_aymaoiw5ape5-4>li:before{content:"\0025cf   "}.lst-kix_aymaoiw5ape5-5>li:before{content:"\0025cf   "}ol.lst-kix_ye9yywojzc8x-5.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-5 0}ol.lst-kix_176rgz1bs3nm-4.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-4 0}ul.lst-kix_doqtdunxf5m9-6{list-style-type:none}.lst-kix_ye9yywojzc8x-2>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-2}.lst-kix_ye9yywojzc8x-6>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-6,decimal) ". "}ul.lst-kix_doqtdunxf5m9-5{list-style-type:none}.lst-kix_aymaoiw5ape5-2>li:before{content:"\0025cf   "}.lst-kix_aymaoiw5ape5-3>li:before{content:"\0025cf   "}.lst-kix_aymaoiw5ape5-6>li:before{content:"\0025cf   "}.lst-kix_aymaoiw5ape5-7>li:before{content:"\0025cf   "}ul.lst-kix_doqtdunxf5m9-8{list-style-type:none}ul.lst-kix_doqtdunxf5m9-7{list-style-type:none}.lst-kix_176rgz1bs3nm-4>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-4}ul.lst-kix_doqtdunxf5m9-2{list-style-type:none}.lst-kix_176rgz1bs3nm-1>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-1}ul.lst-kix_doqtdunxf5m9-1{list-style-type:none}.lst-kix_ye9yywojzc8x-8>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-8}ul.lst-kix_doqtdunxf5m9-4{list-style-type:none}ul.lst-kix_doqtdunxf5m9-3{list-style-type:none}.lst-kix_ye9yywojzc8x-5>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-5}ol.lst-kix_f55kr1562bos-2.start{counter-reset:lst-ctn-kix_f55kr1562bos-2 0}ul.lst-kix_doqtdunxf5m9-0{list-style-type:none}ol.lst-kix_176rgz1bs3nm-0{list-style-type:none}ol.lst-kix_176rgz1bs3nm-1{list-style-type:none}.lst-kix_aymaoiw5ape5-0>li:before{content:"\0025cf   "}.lst-kix_aymaoiw5ape5-1>li:before{content:"\0025cf   "}.lst-kix_176rgz1bs3nm-5>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-5}ol.lst-kix_f55kr1562bos-8.start{counter-reset:lst-ctn-kix_f55kr1562bos-8 0}.lst-kix_ye9yywojzc8x-3>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-3}.lst-kix_f55kr1562bos-0>li{counter-increment:lst-ctn-kix_f55kr1562bos-0}ol.lst-kix_f55kr1562bos-5.start{counter-reset:lst-ctn-kix_f55kr1562bos-5 0}ol.lst-kix_ye9yywojzc8x-8.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-8 0}ol.lst-kix_ye9yywojzc8x-0.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-0 0}.lst-kix_f55kr1562bos-1>li{counter-increment:lst-ctn-kix_f55kr1562bos-1}.lst-kix_176rgz1bs3nm-8>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-8,lower-roman) ". "}ol.lst-kix_176rgz1bs3nm-6.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-6 0}.lst-kix_176rgz1bs3nm-6>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-6,decimal) ". "}.lst-kix_176rgz1bs3nm-5>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-5,lower-roman) ". "}.lst-kix_176rgz1bs3nm-7>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-7,lower-latin) ". "}ul.lst-kix_hllk1hx9kq6b-8{list-style-type:none}ul.lst-kix_hllk1hx9kq6b-6{list-style-type:none}.lst-kix_ye9yywojzc8x-1>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-1,lower-latin) ". "}ul.lst-kix_hllk1hx9kq6b-7{list-style-type:none}ul.lst-kix_hllk1hx9kq6b-4{list-style-type:none}ul.lst-kix_hllk1hx9kq6b-5{list-style-type:none}.lst-kix_176rgz1bs3nm-2>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-2,lower-roman) ". "}ul.lst-kix_hllk1hx9kq6b-2{list-style-type:none}.lst-kix_ye9yywojzc8x-0>li:before{content:"" counter(lst-ctn-kix_ye9yywojzc8x-0,decimal) ". "}.lst-kix_ye9yywojzc8x-4>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-4}ul.lst-kix_hllk1hx9kq6b-3{list-style-type:none}.lst-kix_176rgz1bs3nm-1>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-1,lower-latin) ". "}.lst-kix_176rgz1bs3nm-3>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-3,decimal) ". "}ul.lst-kix_hllk1hx9kq6b-0{list-style-type:none}ul.lst-kix_hllk1hx9kq6b-1{list-style-type:none}.lst-kix_176rgz1bs3nm-0>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-0,decimal) ". "}.lst-kix_176rgz1bs3nm-4>li:before{content:"" counter(lst-ctn-kix_176rgz1bs3nm-4,lower-latin) ". "}.lst-kix_ye9yywojzc8x-1>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-1}.lst-kix_hllk1hx9kq6b-8>li:before{content:"\0025a0   "}.lst-kix_hllk1hx9kq6b-7>li:before{content:"\0025cb   "}.lst-kix_ye9yywojzc8x-0>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-0}ol.lst-kix_176rgz1bs3nm-0.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-0 0}ol.lst-kix_ye9yywojzc8x-2.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-2 0}.lst-kix_hllk1hx9kq6b-2>li:before{content:"\0025a0   "}.lst-kix_hllk1hx9kq6b-1>li:before{content:"\0025cb   "}.lst-kix_176rgz1bs3nm-3>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-3}.lst-kix_f55kr1562bos-3>li{counter-increment:lst-ctn-kix_f55kr1562bos-3}.lst-kix_hllk1hx9kq6b-0>li:before{content:"\0025cf   "}.lst-kix_ye9yywojzc8x-6>li{counter-increment:lst-ctn-kix_ye9yywojzc8x-6}ol.lst-kix_f55kr1562bos-0.start{counter-reset:lst-ctn-kix_f55kr1562bos-0 0}ol.lst-kix_ye9yywojzc8x-3.start{counter-reset:lst-ctn-kix_ye9yywojzc8x-3 0}ol.lst-kix_176rgz1bs3nm-1.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-1 0}.lst-kix_176rgz1bs3nm-6>li{counter-increment:lst-ctn-kix_176rgz1bs3nm-6}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ol.lst-kix_f55kr1562bos-6.start{counter-reset:lst-ctn-kix_f55kr1562bos-6 0}.lst-kix_f55kr1562bos-0>li:before{content:"" counter(lst-ctn-kix_f55kr1562bos-0,decimal) ". "}.lst-kix_hllk1hx9kq6b-3>li:before{content:"\0025cf   "}.lst-kix_hllk1hx9kq6b-4>li:before{content:"\0025cb   "}.lst-kix_hllk1hx9kq6b-5>li:before{content:"\0025a0   "}ol.lst-kix_176rgz1bs3nm-7.start{counter-reset:lst-ctn-kix_176rgz1bs3nm-7 0}.lst-kix_hllk1hx9kq6b-6>li:before{content:"\0025cf   "}ol{margin:0;padding:0}table td,table th{padding:0}.c18{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117pt;border-top-color:#000000;border-bottom-style:solid}.c4{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:93.6pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:204pt;border-top-color:#000000;border-bottom-style:solid}.c53{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:264pt;border-top-color:#000000;border-bottom-style:solid}.c25{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c22{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c44{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c5{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center;height:11pt}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Cambria";font-style:normal}.c47{padding-top:0pt;padding-bottom:16pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Cambria";font-style:normal}.c10{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c36{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c30{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c55{padding-top:10pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c11{font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Cambria";font-style:normal}.c56{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c26{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c23{color:#000000;text-decoration:none;vertical-align:baseline;font-size:20pt;font-style:normal}.c27{text-decoration:none;vertical-align:baseline;font-size:26pt;font-style:normal}.c32{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c19{border-spacing:0;border-collapse:collapse;margin-right:auto}.c35{text-decoration:none;vertical-align:baseline;font-style:normal}.c31{text-decoration:none;font-size:11pt;font-style:normal}.c8{vertical-align:sub;font-family:"Cambria";font-weight:400}.c54{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c46{font-weight:400;font-size:11pt;font-family:"Arial"}.c39{padding:0;margin:0}.c14{font-weight:400;font-family:"Cambria"}.c16{font-size:14pt;color:#434343}.c51{text-decoration:none;font-size:11pt}.c42{margin-left:72pt;padding-left:0pt}.c50{font-weight:400;font-family:"Courier New"}.c37{margin-left:36pt;padding-left:0pt}.c40{text-decoration:none;font-style:normal}.c20{font-weight:700;font-family:"Cambria"}.c12{color:inherit;text-decoration:inherit}.c34{height:11pt}.c21{text-indent:36pt}.c49{font-size:6pt}.c13{height:16pt}.c45{height:20pt}.c29{height:0pt}.c15{font-style:italic}.c43{font-size:13pt}.c38{vertical-align:sub}.c52{font-size:15pt}.c33{font-size:10pt}.c41{margin-left:252pt}.c48{vertical-align:super}.c9{margin-left:432pt}.c24{color:#000000}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c54 doc-content"><p class="c36 c34 title" id="h.ebmg21n2jso2"><span class="c14 c24 c27"></span></p><p class="c36 c34 title" id="h.ofjsos9rj4dq"><span class="c27 c14 c24"></span></p><p class="c36 c34 title" id="h.80aawmuw489"><span class="c27 c14 c24"></span></p><p class="c36 c34 title" id="h.v9r8zxd7eugv"><span class="c27 c14 c24"></span></p><p class="c36 title" id="h.4o1f50ckif75"><span class="c27 c14 c24">RBE 3001: Unified Robotics III</span></p><p class="c47 subtitle" id="h.dphv5z7kntqa"><span class="c35 c14 c24 c52">Lab 5: Robotic Pick and Place System</span></p><p class="c0"><span class="c2"></span></p><p class="c17"><span class="c35 c14 c24 c43">Team 7</span></p><p class="c17"><span class="c35 c14 c43 c24">3/3/2023</span></p><p class="c17"><span class="c35 c14 c43 c24">Nikki Espeland, Abigail Hyde, Cristobal Rincon Rogers</span></p><hr style="page-break-before:always;display:none;"><p class="c5"><span class="c2"></span></p><h1 class="c25" id="h.vjrcgt71vg87"><span class="c23 c14">Table of Contents</span></h1><p class="c0"><span class="c2"></span></p><p class="c26"><span class="c11"><a class="c12" href="#h.vjrcgt71vg87">Table of Contents</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.vjrcgt71vg87">2</a></span></p><p class="c30"><span class="c11"><a class="c12" href="#h.688dzvueb1dv">Introduction</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.688dzvueb1dv">3</a></span></p><p class="c30"><span class="c11"><a class="c12" href="#h.razr2jopoh64">Development and Implementation</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.razr2jopoh64">4</a></span></p><p class="c30"><span class="c11"><a class="c12" href="#h.g2g9fwko2kw9">Results</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.g2g9fwko2kw9">5</a></span></p><p class="c30"><span class="c11"><a class="c12" href="#h.cf1ewklr9vi0">Discussion</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.cf1ewklr9vi0">6</a></span></p><p class="c30"><span class="c11"><a class="c12" href="#h.esh0xnhperca">Conclusion</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.esh0xnhperca">6</a></span></p><p class="c55"><span class="c11"><a class="c12" href="#h.2s810e84megh">Team Member&rsquo;s Contribution</a></span><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c11"><a class="c12" href="#h.2s810e84megh">7</a></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c25 c45" id="h.er6fg96bg5u6"><span class="c23 c14"></span></h1><h1 class="c25" id="h.688dzvueb1dv"><span class="c14">Introduction</span></h1><p class="c56"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For the final project, we programmed a 3-DoF robotic arm to sort colored balls on a checkerboard. We implemented forward and inverse position kinematics, forward velocity kinematics, and computer vision concepts to achieve full functionality. A fisheye camera was used to take images of the checkerboard, then the program interpreted the image using filtering and segmentation to detect the location of the colored balls. Once the locations are derived, the robot selects the closest ball and sorts it into a specific corner corresponding to the ball&rsquo;s color. We calibrated the camera, developed color masks, and implemented segmentation to complete the computer vision functionality. We also built a state machine to handle the actions of the robot, as it can continuously pick up balls in its field of view until there are no balls left to be sorted. </span></p><p class="c0 c21"><span class="c2"></span></p><hr style="page-break-before:always;display:none;"><p class="c5 c21"><span class="c2"></span></p><h1 class="c25" id="h.razr2jopoh64"><span class="c14">Development and Implementation</span></h1><h2 class="c10" id="h.1s4y0fbfwe01"><span class="c6">Robot Frames &amp; Dimensions</span></h2><p class="c1 c21"><span class="c2">We used a serial manipulator that consists of three degrees of freedom (DoF) controlled by three servo motors that rotate to control three rotational joins, as seen in Figure 1. In addition, the serial robot arm has a small gripper servo that allows the arm to grab objects. The gripper position, or end-effector position, can be modified by adjusting the three servo motor positions at the joints. </span></p><p class="c0"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 387.50px; height: 341.74px;"><img alt="" src="images/image53.png" style="width: 387.50px; height: 341.74px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure X: The robot arm used with annotated actuators and joints. </span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 293.50px; height: 311.56px;"><img alt="" src="images/image61.png" style="width: 704.40px; height: 384.94px; margin-left: -261.89px; margin-top: -37.31px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure 2: The robot arm configuration and dimensions, and the origins of the intermediate coordinate frames. </span></p><h2 class="c10" id="h.5b6k55ranqn2"><span class="c6">Forward Position Kinematics</span></h2><p class="c1"><span class="c2">Based on the arm configuration shown in Figure 2, we used the following steps of the D-H method for deriving the forward kinematics for the robotic arm: </span></p><ol class="c39 lst-kix_ye9yywojzc8x-0 start" start="1"><li class="c1 c37 li-bullet-0"><span class="c2">Assign the local reference frame to each joint following a set of rules</span></li></ol><ol class="c39 lst-kix_ye9yywojzc8x-1 start" start="1"><li class="c1 c42 li-bullet-0"><span class="c14">Assign the </span><span class="c20">z</span><span class="c20 c38">i</span><span class="c20">&nbsp;</span><span class="c2">axes</span></li><li class="c1 c42 li-bullet-0"><span class="c14">Locate the origin </span><span class="c20">o</span><span class="c20 c38">i</span></li><li class="c1 c42 li-bullet-0"><span class="c14">Assign the </span><span class="c20">x</span><span class="c31 c20 c38 c24">i</span></li><li class="c1 c42 li-bullet-0"><span class="c2">Assign the right-handed coordinate frames</span></li></ol><ol class="c39 lst-kix_ye9yywojzc8x-0" start="2"><li class="c1 c37 li-bullet-0"><span class="c14">Determine the D-H parameters for each joint: &theta;</span><span class="c8">i</span><span class="c14">, d</span><span class="c8">i</span><span class="c14">, a</span><span class="c8">i</span><span class="c14">, &#593;</span><span class="c8 c33">i</span></li><li class="c1 c37 li-bullet-0"><span class="c14">Form the homogeneous transformation matrices </span><span class="c14 c15">A</span><span class="c8 c15">i</span></li><li class="c1 c37 li-bullet-0"><span class="c14">Form the forward kinematics transformation matrix </span><span class="c14 c15">T</span><span class="c8 c15">n</span><span class="c14 c15 c48">0</span></li></ol><h3 class="c22" id="h.urozh1b9fiv"><span class="c14">Step 1a: Assigning the Z</span><span class="c8">i</span><span class="c8 c15">&nbsp;</span><span class="c14 c16 c35">axes</span></h3><p class="c1"><span class="c14">Initially, we were given the initial and final coordinate frames and had to determine the intermediate frames. The Z</span><span class="c8">0</span><span class="c14">&nbsp;axis points upward along the axis of rotation of the revolute joint and was placed on the base of the robot. X</span><span class="c8">0</span><span class="c2">&nbsp;was chosen arbitrarily to point leftward. &nbsp;To locate the following axes of the actuators, we assigned the z axes as the axis of motion/actuation. Additionally, according to a rule of the DH method, the end-effector was assigned a z-axis parallel to the revolute joint that preceded it. &nbsp;</span></p><h3 class="c22" id="h.hez2b5w780ut"><span class="c14 c16">Step 1b: Locate the origin of o</span><span class="c14 c16">i</span></h3><p class="c1"><span class="c14">The origins for each frame were found by finding the common normal between axes. For instance, the Z</span><span class="c8">1</span><span class="c14">&nbsp;axis is perpendicular to Z</span><span class="c8">0</span><span class="c14">&nbsp;and so the origin must lie at their intersection. Z</span><span class="c8">1</span><span class="c14">&nbsp;and Z</span><span class="c8">2</span><span class="c14">, however, are parallel to each other. Therefore, the choice is arbitrary. Thus, we chose to place that origin at the joint since we found the location convenient. The same was true for the Z</span><span class="c8">3</span><span class="c14">&nbsp;and Z</span><span class="c8">2</span><span class="c14">&nbsp;axes, and so we placed o</span><span class="c8">3</span><span class="c2">&nbsp;at the end effector. This choice was not only out of convenience but rather because it would result in the completion of our goal. Our goal is to determine a forward kinematic solution for the end effector to the base of the robot to know where the position of the end effector each time we move. If we did not place the origin at the end effector, then we would miss our goal. </span></p><h3 class="c22" id="h.t02rks8q5cfa"><span class="c14 c16">Step 1c: Assign the x</span><span class="c14 c16">i</span><span class="c35 c14 c16">&nbsp;axis</span></h3><p class="c1"><span class="c14">We assigned the axes along the common normal between z</span><span class="c8">i-1</span><span class="c14">&nbsp;and z</span><span class="c8">i</span><span class="c14">&nbsp;through the ith origin. Z</span><span class="c8">0</span><span class="c14">&nbsp;and Z</span><span class="c8">1</span><span class="c14">&nbsp;make a plane at their intersection points, therefore x would have to be normal to that plane. X is normal to that plane in two directions. We chose the direction parallel to the previous frame for convenience. Axis Z</span><span class="c8">1</span><span class="c14">&nbsp;and Z</span><span class="c8">2</span><span class="c14">&nbsp;are parallel to each other. Therefore the common normal between the two axes passing through their origins is along the direction of L</span><span class="c8">2</span><span class="c14">. We chose the upward position for convenience. Lastly, axis Z</span><span class="c8">2</span><span class="c14">&nbsp;and Z</span><span class="c8">3</span><span class="c14">&nbsp;are parallel. Therefore the common normal between the two axes is along L</span><span class="c8">3</span><span class="c2">. Again, we chose the direction parallel to earlier frames for convenience. In Figure 2, you will see a drawing showcasing the axes and the coordinate frames without the Y axis. We are omitting the Y axis in our drawing because they are not relevant to the DH representation. However, it is very simple to add the Y axis since we want to maintain a right-handed coordinate frame.</span></p><p class="c0"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 329.00px; height: 373.91px;"><img alt="" src="images/image62.jpg" style="width: 478.55px; height: 617.06px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure 2: Drawing of the robot arm containing intermediate axes and origins. </span></p><p class="c5"><span class="c2"></span></p><p class="c1"><span class="c14">We used the dimensions of </span><img src="images/image1.png"><span class="c14">, </span><img src="images/image2.png"><span class="c14">, </span><img src="images/image3.png"><span class="c14">, and </span><img src="images/image4.png"><span class="c2">&nbsp;for each of the robot links. </span></p><h2 class="c10" id="h.6v7xceb7s00a"><span class="c14 c16">Step 2: Determining the DH parameters</span></h2><p class="c1"><span class="c14">The DH parameters are necessary to represent the transformation undergone from frame to frame. For instance, the DH method states that by rotating by an angle &theta;, Translating along the z-axis by d units, translating along the x-axis by a-units, and rotating along the x-axis by &#593; degrees, you can obtain the transformation matrix for a frame i-1 to i. The transformation matrices are represented by the letter </span><span class="c14 c15">A</span><span class="c2">.</span></p><p class="c17"><span class="c14">&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 407.38px; height: 47.17px;"><img alt="" src="images/image41.png" style="width: 407.38px; height: 47.17px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 365.50px; height: 97.82px;"><img alt="" src="images/image48.png" style="width: 365.50px; height: 97.82px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">Therefore, to find the transformation matrices between frames we must find the DH parameters and evaluate them using the A matrix. We will find three pairs of DH parameters since there are as many DH parameter sets as there are joints. To find the parameters, we follow the rules of the DH parameters:</span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 353.50px; height: 130.61px;"><img alt="" src="images/image57.png" style="width: 353.50px; height: 130.61px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">After determining the parameters, we place them in a table called the DH table. </span></p><p class="c0"><span class="c35 c14 c24 c49"></span></p><p class="c1"><span class="c14 c16">DH Parameter Table</span></p><a id="t.dfa7b448698cdb91c1b5b43048a30272f18f3355"></a><a id="t.0"></a><table class="c19"><tr class="c29"><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">i (joint number)</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">&theta;</span><span class="c31 c8 c24">i</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">d</span><span class="c31 c8 c24">i</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">a</span><span class="c31 c8 c24">i</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">&#593;</span><span class="c8 c33 c24 c40">i</span></p></td></tr><tr class="c29"><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">1</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">&theta;</span><span class="c8">1</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">L</span><span class="c8">0</span><span class="c14">+L</span><span class="c8">1</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">0</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">-&pi;/2</span></p></td></tr><tr class="c29"><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">2</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">&theta;</span><span class="c8">2</span><span class="c14">&ndash;</span><img src="images/image5.png"></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">0</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">L</span><span class="c8 c24 c31">2</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">0</span></p></td></tr><tr class="c29"><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">3</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">&theta;</span><span class="c8">3</span><span class="c14">+</span><img src="images/image5.png"></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">0</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c14">L</span><span class="c8">3</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c3"><span class="c2">0</span></p></td></tr></table><h2 class="c10" id="h.pzxmt52o523r"><span class="c35 c14 c16">Step 3: Find Transformation Matrices</span></h2><p class="c1"><span class="c14">Next, we found each transformation matrix between each joint frame. Due to the size of the final transformation matrix T</span><span class="c8">n</span><span class="c14 c48">0</span><span class="c14">&nbsp;we will omit it. However, as an exercise to the reader, multiply these matrices and use matlab to verify your calculations. We used matlab and solved for the final matrix symbolically. Then, we substituted for each joint variable and evaluated it. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 477.33px;"><img alt="" src="images/image56.png" style="width: 624.00px; height: 477.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c10" id="h.fuw1rva93ll0"><span class="c6">Inverse Position Kinematics</span></h2><p class="c1 c21"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 553.50px; height: 392.95px;"><img alt="" src="images/image63.png" style="width: 553.50px; height: 392.95px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c21"><span class="c2"></span></p><p class="c17 c21"><span class="c2">Figure X: 3 DoF articulated robotic arm diagram (RBE 3001 Lecture Slides). This diagram was used as a guideline for the derivation of the inverse kinematics of our robot. </span></p><h2 class="c10" id="h.zhvine6ffhn"><span class="c6">Deriving Inverse Kinematics </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 125.48px; height: 261.86px;"><img alt="" src="images/image65.png" style="width: 125.48px; height: 261.86px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></h2><p class="c1 c21"><span class="c2">In order to obtain the inverse kinematics necessary to convert between the task space to the joint space, we started with drawings of the robot arm. We started by considering the arm from the top and looking at the x-y plane. From here we deduced that, when the length of the robot arm in the x-y plane is known as d, the x and y coordinates of the end effector are known by the following equations. </span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 203.00px; height: 156.63px;"><img alt="" src="images/image60.png" style="width: 203.00px; height: 156.63px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c2"></span></p><p class="c17"><span class="c2">Figure X: Projection of the end effector onto the X-Y plane of the base frame. </span></p><p class="c5"><span class="c2"></span></p><p class="c17"><img src="images/image6.png"><span class="c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><img src="images/image7.png"><span class="c2">&nbsp; &nbsp;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Next we looked at the arm from the side and considered the x-z plane with the assumption that </span><img src="images/image8.png"><span class="c2">&nbsp;is equal to 0. This places the arm flush to the plane meaning we can treat it like a 2D figure where d as mentioned before is both the total length of the arm in the x-y plane and the x coordinate of the end effector. &nbsp;</span></p><p class="c0"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 294.00px; height: 190.32px;"><img alt="" src="images/image39.png" style="width: 294.00px; height: 190.32px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure X: Projection of the end effector onto the X-Z plane. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From here we can break the arm x coordinate into 2 parts where </span><img src="images/image9.png"><span class="c14">&nbsp;is the x component of </span><img src="images/image10.png"><span class="c14">&nbsp;and </span><img src="images/image11.png"><span class="c14">&nbsp;is the x component of </span><img src="images/image10.png"><span class="c14">. </span><img src="images/image9.png"><span class="c14">&nbsp;is equal to </span><img src="images/image12.png"><span class="c14">&nbsp;, and </span><img src="images/image13.png"><span class="c14">&nbsp;is equal to </span><img src="images/image14.png"><span class="c14">&nbsp;*</span><img src="images/image15.png"><span class="c14">. Looking at </span><img src="images/image16.png"><span class="c14">&nbsp;the angle formed with the horizontal is equal to </span><img src="images/image17.png"><span class="c14">&nbsp;+ </span><img src="images/image18.png"><span class="c14">, which makes </span><img src="images/image11.png"><span class="c14">&nbsp;equal to cos(</span><img src="images/image17.png"><span class="c14">+</span><img src="images/image18.png"><span class="c14">) * </span><img src="images/image19.png"><span class="c14">&nbsp;and </span><img src="images/image20.png"><span class="c14">&nbsp;equal to </span><img src="images/image21.png"><span class="c14">. &nbsp;Combining these two components and adding in the z offset of </span><img src="images/image22.png"><span class="c14">&nbsp;and </span><img src="images/image23.png"><span class="c14">&nbsp;gives you the following equations when </span><img src="images/image8.png"><span class="c2">&nbsp;is equal to 0. </span></p><p class="c0"><span class="c2"></span></p><a id="t.6edd65bcd7eb11cf10575802e8a0dd45811a365e"></a><a id="t.1"></a><table class="c19"><tr class="c29"><td class="c53" colspan="1" rowspan="1"><p class="c17"><span class="c14">&nbsp;</span><img src="images/image24.png"><span class="c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><img src="images/image25.png"></p></td></tr></table><p class="c0"><span class="c2"></span></p><p class="c1 c21"><span class="c14">Since d is equal to x when </span><img src="images/image8.png"><span class="c2">&nbsp;is equal to 0 then the following equations can be derived from the earlier equations.</span></p><p class="c0 c21"><span class="c2"></span></p><p class="c1 c21"><img src="images/image26.png"></p><p class="c1 c21"><img src="images/image27.png"><span class="c2">&nbsp;</span></p><p class="c1 c21"><img src="images/image28.png"></p><p class="c1 c21"><img src="images/image25.png"></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To write the actual ik3001 function, we used the geometric approach to determine the equations for </span><img src="images/image8.png"><span class="c14">, </span><img src="images/image17.png"><span class="c14">, and </span><img src="images/image18.png"><span class="c2">.</span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 203.00px; height: 156.63px;"><img alt="" src="images/image60.png" style="width: 203.00px; height: 156.63px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c21"><img src="images/image29.png"></p><p class="c0 c21"><span class="c2"></span></p><p class="c1 c21"><span class="c14">To solve for </span><img src="images/image17.png"><span class="c14">&nbsp;and </span><img src="images/image18.png"><span class="c2">, the following intermediate equations were defined. </span></p><p class="c1 c21"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 340.00px; height: 228.00px;"><img alt="" src="images/image64.png" style="width: 340.00px; height: 228.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c21"><span class="c2"></span></p><a id="t.b19a57d254d599707926b903bd229ed9fea1e819"></a><a id="t.2"></a><table class="c19"><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c2">Equation </span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">Explanation</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c14">d = </span><img src="images/image30.png"><span class="c2">&nbsp; </span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">length of the arm in the xy plane</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c2">n = Z - 95 &nbsp;</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">distance from the end effector to joint 1 along the z axis</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c14">r = </span><img src="images/image31.png"></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">distance from joint 1 to the end effector</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c14">R = </span><img src="images/image32.png"></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">angle formed by l2 and l3</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c14">K = &nbsp;</span><img src="images/image33.png"></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">angle formed by the line from joint 1 to end effector and l2</span></p></td></tr><tr class="c29"><td class="c28" colspan="1" rowspan="1"><p class="c1 c21"><span class="c14">L = </span><img src="images/image34.png"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c1"><span class="c2">angle formed by the line from joint 1 to end effector and the horizontal</span></p></td></tr></table><p class="c0 c21"><span class="c2"></span></p><p class="c1 c21"><span class="c2">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1 c21"><span class="c2">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c21 c41"><span class="c2"></span></p><p class="c1 c21"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c21 c41"><span class="c2"></span></p><p class="c1 c21"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1 c21"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c21 c41"><span class="c2"></span></p><p class="c1 c21"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c21 c41"><span class="c2"></span></p><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><h2 class="c10" id="h.do61otje8fdt"><span class="c14">Forwa</span><span class="c6">rd Velocity Kinematics</span></h2><p class="c1 c21"><span class="c14">Velocity kinematics, also known as differential kinematics, maps joint velocities to end effector velocities and vice versa. Velocity kinematics depends on the Jacobian matrix, which represents the rate of change of a matrix with respect to a vector, evaluated at a specific configuration. There are two ways to derive the Jacobian matrix for forward and inverse velocity kinematics: analytically and geometrically. We chose the analytic Jacobian solution due to its simplicity in implementation using MATLAB. We took the partial derivatives of the end effector position from our transformation matrix with respect to each joint variable. This gave us a matrix of size 3x3. We devised the angular portion of the Jacobian J</span><span class="c8">&#9077;</span><span class="c14">&nbsp;using the z</span><span class="c8">i</span><span class="c14 c48">0</span><span class="c14">&nbsp;axes giving us another 3x3. When combined, these two create a 6x3 Jacobian. However, for our calculations, we only required the linear velocity portion of the Jacobian J</span><span class="c8">V</span><span class="c2">&nbsp;which was size 3x3. The Jacobian is not only useful for mapping velocities between two spaces (task and joint space), but finding the singular configurations. A singular configuration is a configuration of the joints that creates issues between mapping the velocities. At a singular configuration, small task space velocities may result in large joint velocities (near maximum that the joints are capable of).</span></p><p class="c0 c21"><span class="c2"></span></p><p class="c5"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 540.00px; height: 211.00px;"><img alt="" src="images/image40.png" style="width: 540.00px; height: 233.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure X: This figure contains an example of the analytic Jacobian calculation.</span></p><p class="c5"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 368.50px; height: 408.05px;"><img alt="" src="images/image51.png" style="width: 368.50px; height: 408.05px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure X: This figure showcases the code written to create the jacobian matrix. </span></p><hr style="page-break-before:always;display:none;"><p class="c5"><span class="c2"></span></p><h2 class="c10" id="h.3c7z048vr4fj"><span class="c6">Validating Jacobian</span></h2><h1 class="c44" id="h.g2g9fwko2kw9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 371.06px; height: 410.07px;"><img alt="" src="images/image46.png" style="width: 371.06px; height: 410.07px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></h1><p class="c17"><span class="c2">Figure X: Singularity position: [-9.12, -60.74, 34.63] (joint variables)</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">The first column is close to zero because as theta 1 changes, there are little to no changes in the position of the end effector. The end effector remains on that line formed by the z-axis. Only changes to theta2 and theta 3 can actually change the position of the arm. Therefore there are infinite solutions. So regardless of changes in theta1, there is no change in the x, y, or z. </span></p><h2 class="c10" id="h.xp5btj8lo9zs"><span class="c6">Inverse Velocity Kinematics </span></h2><p class="c1"><span class="c2">To calculate the desired joint velocities required, we need to take the inverse of the Jacobian and multiply that by the desired end effector velocity. </span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 556.50px; height: 95.62px;"><img alt="" src="images/image50.png" style="width: 556.50px; height: 95.62px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span class="c2">Figure X: Mapping from joint space velocities to task space velocities and vice versa using the Jacobian and inverse Jacobian. </span></p><h2 class="c10" id="h.le3nz7mmwn6w"><span class="c6">System Architecture</span></h2><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To begin with, we decided to build off of our robot and trajectory planner classes that we developed in previous labs. Our quintic version of the run trajectory function produced the smoothest path. This function was used with task space inputs to follow straight lines from point to point instead of the curves produced by working in the joint space. We also created 2 new classes, Camera and ImageProcessing to put our vision related functions into. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From there we decided to tackle the task of identifying the colored balls using the camera. We went through the calibration process and then analyzed the images of the balls to identify what would be good ranges for color and size of balls. RGB values proved unintuitive for this process so we chose to look at HSV values. HSV values represent the color as a single hue value on the color wheel which makes color thresholds much more intuitive. We selected ranges for red, orange, yellow, and green so the camera could correctly identify the balls. </span></p><p class="c1 c21"><span class="c2">Using the selected ranges, we developed masks that isolated the sections of the images that fell into that particular color range. Looking at the masked images, we noticed that some areas outside of the balls were included in the color selected regions. We used the region props function to discern the size of each of the regions and implemented a size filter that removed all the regions that were too small or too large to be a ball. &nbsp;With the remaining acceptable regions, we found the centroids of the areas. These centroids are initially found in the 2D pixel space, but are then converted to the 2D checkerboard space, and then into the 3D world space.</span></p><p class="c1 c21"><span class="c2">This process of finding the centroids of the acceptable regions using color masks, and size filters was done for each color of the balls we need to identify and the centroids for each color were labeled by color and combined into a single list. We decided that the ball to be sorted would be the one closest to the end effector and the time of the image. To do so, we created a function that would return the centroid closest to the end effector&rsquo;s xyz position from the list of all centroids found.</span></p><p class="c1 c21"><span class="c2">Next we started working on the robot&#39;s motions. We decided it would be best for the arm to go to a point directly above the ball being picked up in order to avoid knocking any of the balls around. From there the arm could move directly down onto the ball without disturbing it and grip it. We also added in a modified home configuration that the arm would go to in between picking up balls and depositing them in their designated bins. This helped eliminate planning paths that would hit the bins&rsquo; walls on the way to and from dropping off balls. </span></p><p class="c1 c21"><span class="c2">When we got to this point, we started moving our code into a state machine to facilitate the movement between states. A check after the centroids are detected determines whether the list actually contains any centroids. If there are no centroids then the image is retaken and reprocessed. Upon 5 consecutive images without any centroids, the state machine will be exited and the robot shut down. CHOOSE_BALL and MOVE_TO_BALL were placed into the same state since they both are a part of gipping the ball. In the same way, SORT_BALL and PLACE_BALL were put together. </span></p><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Classes and Methods</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 502.00px; height: 804.00px;"><img alt="" src="images/image58.png" style="width: 502.00px; height: 804.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1"><span class="c2">State Machine</span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 309.00px; height: 551.00px;"><img alt="" src="images/image59.png" style="width: 309.00px; height: 551.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c25 c45" id="h.ew62qyz4wqbr"><span class="c23 c14"></span></h1><h1 class="c25" id="h.hlaprkwnglnt"><span class="c14">Results</span></h1><h2 class="c10" id="h.x02eusqlzgen"><span class="c6">Section 2</span></h2><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The camera uses the calibration pictures to calculate the intrinsic camera matrix, including the focal point, optical center, and skew coefficient. It does this by using multiple views of the checkerboard and knowledge of the size of the checkerboard&rsquo;s squares to determine the focal length from the checkerboard as well as the optical center. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since the camera needs a significant number of data points to accurately calculate the intrinsic camera parameters, we took sixty pictures of the checkerboard from different angles and distances. Then we filtered out unusable pictures and pictures where the calibration app estimated the checkerboard origin in the wrong place, leaving us with about twenty pictures. </span></p><p class="c1 c21"><span class="c2">From here, we ran the pictures through the calibration function with the fish-eye setting, which returned data on the reprojection error. The reprojection error is the difference between where a point would be based on the estimated camera matrix and where that point actually is in any given image. The mean reprojection error had to be under one pixel to ensure the accuracy of the camera matrix, so we removed images that produced outliers in the reprojection errors. This gave us a final mean error of 0.86 pixels. This means for any point in any image, the difference between the location of the point in the image and the location estimated by the intrinsic camera matrix will likely be around 0.86 pixels. Compared to the dimensions of our images, which number in the hundreds of pixels, this is very accurate. </span></p><h2 class="c10" id="h.l479fjdrapsf"><span class="c6">Section 3</span></h2><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In this section, we derived the transformation matrix to convert a pixel coordinate in the camera&rsquo;s 2D image to the robot&rsquo;s 3D coordinate system. We extrapolated the transformation matrix from the coordinate system of the checkerboard to the robot&rsquo;s coordinate system, measured in millimeters. We multiplied that with the transformation matrix derived from the intrinsic camera parameters, obtained by accessing the field in the Camera class. The combined transformation only works when z = 0 however, because the camera provides the pixel coordinates from its 2D interpretation of the 3D world. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To obtain the transformation matrix from the coordinate system of the checkerboard to the robot&rsquo;s coordinate system, we found the rotation needed to move from the checkerboard view to the robot&rsquo;s view, then multiplied it by a translation matrix of measurements between the two origins. The calculations can be seen below. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">Pixel selected in image: [347, 259] </span></p><p class="c1"><span class="c2">points2World result using pixel coordinates: [-0.9449, -1.4668]</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><img src="images/image35.png"></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">Full transformation matrix below:</span></p><p class="c17"><span class="c14">&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 156.00px; height: 94.00px;"><img alt="" src="images/image52.png" style="width: 156.00px; height: 94.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c10" id="h.aln0fe87985u"><span class="c6">Section 5</span></h2><p class="c1"><span class="c14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our initial approach towards image processing was generating a binary mask for an image based on thresholding values. For instance, the function in Figure X describes the algorithmic approach of generating the binary mask. We would extract the three channels in the image : Hue, Saturation, Value. Then, we would generate logical MATLAB Matrices containing 1s where each channel was within its threshold. That is, if the hue at a given index within the hue matrix was above the minimum imputed threshold, then in the logical array </span><span class="c50">minHueThreshold</span><span class="c2">, a 1 would be placed at that same index. Therefore, the logical array had the same dimensions as the image passed in. The process was repeated for the max hue threshold on the hue matrix and the other remaining channels. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 428.00px;"><img alt="" src="images/image37.png" style="width: 624.00px; height: 428.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c1 c21"><span class="c2">Once the logical arrays were generated, we would logically AND (&amp;) the two logical matrices to generate a matrix where both thresholds were satisfied. After generating this matrix, we would negate it so that we would have the matrix indices that did not meet the threshold and set them equal to 0. We performed this process for all three channels. Then, once those pixels had been set to zero, we used the matlab function to concatenate all three channel matrices and then performed an ALL operation on them. That is, if the value at a given index is 1 for all three channels, then it would maintain that 1. However, if all three channels did not contain a 1, then that pixel would be set to zero. Values that are not all 1 mean that they did not meet the threshold for all channels, and so had to be removed. We had a separate function where we would apply this mask to the image to extract only the color that the mask contained. In our initial testing, we allowed all possible hues to be accepted. The issue with this method is that this does not allow us to distinguish between colors of the balls. We could have manually calculated the hue range for the specific colors, but we chose an alternative route of using Matlab&rsquo;s color thresholding toolbox which could generate scripts for us to run to threshold and segment our image robustly. We chose this option due to its simplicity and convenience. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 326.67px;"><img alt="" src="images/image54.png" style="width: 624.00px; height: 326.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 580.50px; height: 325.08px;"><img alt="" src="images/image42.png" style="width: 580.50px; height: 325.08px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c10" id="h.r9o8imv1ol6h"><span class="c6">Section 6</span></h2><p class="c1"><span class="c14">To detect the centroid of the balls, we used MATLAB&rsquo;s region properties tool to calculate both the area and the centroid of a ball. The reason we chose to extract the area of a region was to add additional robustness to our image processing system. We found that a consistent threshold for the areas was between 3000 and 6000 pixels. Any erroneous data or small regions captured by</span><span class="c14">&nbsp;the regionprops</span><span class="c2">&nbsp;function would be filtered out as a possible centroid. On top of filtering by area, we also filtered out the location of erroneous centroids that were not within our workspace. We set the bounds for appropriate centroid locations. For example, our experiments found that x pixel locations between 225 and 1000 and y pixel locations between 150 and 470, were most appropriate. We implemented this function because when our robot collects a ball, it places it somewhere that remains visible to the camera. So, to prevent the robot from picking up a ball that it has already sorted, we created this filter. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 346.67px;"><img alt="" src="images/image47.png" style="width: 624.00px; height: 346.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 608.00px; height: 333.00px;"><img alt="" src="images/image43.png" style="width: 624.00px; height: 333.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c2"></span></p><p class="c1"><span class="c2">Lastly, our image processing corrects for the distortion of the point in the checkerboard frame created by the camera. This correction is performed by calculating some offsets to undistort the balls centroid location in the world frame. &nbsp;We calculate the X and Y offset. The X offset is calculated by projecting the ball onto the XZ plane, as seen in Figure X above, and using similar triangles to determine where the ball actually lies on the X axis. We then project the ball onto the XY plane to determine y offsets. Figure X, shows our hand calculations to derive these offsets. </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 784.00px;"><img alt="" src="images/image66.png" style="width: 624.00px; height: 784.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c2"></span></p><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 536.50px; height: 159.06px;"><img alt="" src="images/image55.png" style="width: 536.50px; height: 159.06px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 520.09px; height: 647.50px;"><img alt="" src="images/image44.png" style="width: 520.09px; height: 647.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c14">&nbsp;</span></p><p class="c1 c21"><span class="c2">Black balls cannot be used for the project because we are using a black checkerboard. During filtering, the camera would pick up the checkerboard squares when attempting to recognize the black balls. Additionally, our robot is black. Therefore, detecting black balls would have been difficult in our environment. </span></p><p class="c1 c21"><span class="c14">To summarize, to filter our balls by color, we implemented masks with HSV to filter by specific hues for each color. We chose to use HSV because we only had to change one parameter (H) for most of the balls. For the green ball, we did have to adjust the saturation as well as the hue since the camera was picking up some green on the board. To implement the masks, we utilized the Color Threshold tool built into MATLAB. The app let us take a picture then adjust the parameters until only a specific range of colors was picked up. Then we converted the mask into a MATLAB script with the mask as a function. We repeated this for each color to generate four masks. When running the program, every time a new image is taken, it is run through each mask to find centroids of balls that match each color, then adds the centroids to an overall list. </span></p><h2 class="c10" id="h.6gl4t4xwuddv"><span class="c6">Section 7</span></h2><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For the final version of the code, we set up the state machine first and filled in the details with helper functions and calls to functions created in previous labs. We implemented four states: first, take an image and process it to find centroids; second, pick a ball to grab and move to the ball&rsquo;s position; third, pick up a ball and move to the correct goal location; and lastly, drop the ball and move back to the home position. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;First, the program determines the position of an object with respect to the robot&rsquo;s reference frame by utilizing the image processing pipeline built in Part 4. Once the program has processed the image and found all centroids, it selects the closest one by calculating the distance using the distance formula. Next, it calculates the joint angles of the end effector by calling the inverse kinematics function implemented in previous labs. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Once it has obtained the joint angles required, it calculates the trajectory coefficients and plans the path from the robot&rsquo;s current position to the ball&rsquo;s location, plus small offsets. These offsets were tuned in all three directions to ensure the end-effector is in the optimal position to pick up the ball. We found that different offsets had to be set for the left or right sides of the checkerboard (negative or positive x in the robot&rsquo;s reference frame). Once hovering over the ball, the robot lowers and closes the gripper to pick up the ball. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lastly, the robot moves to the goal position associated with the ball&rsquo;s color then returns to home using trajectory planning. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We used quintic trajectory in order to avoid the jerk that can occur when using cubic trajectory. It was more beneficial to include acceleration to ensure the most accurate and smooth path from one position to another. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In order to exclude picked balls from being considered, we implemented a set of thresholds corresponding to pixels in the image. Within a specific rectangle, the camera will recognize centroids as balls to pick up. But if the centroid is outside the range of the thresholds, the camera will not recognize the balls as something that needs to be moved. </span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To sort the balls, we chose to use small plastic drawers as containers to hold the balls. There was a drawer in each corner except the corner where the robot starts. Each corner was assigned to a color, and a specific coordinate was programmed to be the drop location for a color. </span></p><hr style="page-break-before:always;display:none;"><p class="c0"><span class="c2"></span></p><h1 class="c25" id="h.cf1ewklr9vi0"><span class="c14 c23">Discussion</span></h1><p class="c1 c21"><span class="c2">To increase the robustness of our system, we would implement singularity detection. Our team omitted such functionality due to time constraints. Additionally, we did not foresee many opportunities for our robot to achieve a singular configuration given the task. However, we did have other protections. For instance, our robot arm will stop and throw an error if a solution to the inverse kinematics position is outside of the reachable workspace. Our robot&rsquo;s movements were all performed in the task space using a quintic polynomial trajectory to achieve a smooth motion. We wanted to ensure control over the starting position, velocity and acceleration, as well as the ending position, velocity and acceleration. To increase the speed of our system, we would also decrease the duration value. During our demonstration, our duration was set to 1 second. However, we did not experiment with other durations to achieve a faster completion of tasks. </span></p><p class="c1 c21"><span class="c2">Our team did not make use of additional image processing besides color thresholding to achieve segmentation. We felt as though we did not need additional applications of filters. Further experimentation is required for us to determine if further processing would have improved the performance of our robot. According to Figure X, Y, Z, our color thresholding could be enhanced to improve our segmentation. Revisions could be made to the threshold for the value and saturation values. </span></p><p class="c1 c21"><span class="c2">During testing, we noticed that the gripper was consistently off by a set distance. On the positive side of the x axis the gripper was consistently 5 mm too low so we added a corresponding offset. On the negative side of the x axis, we added a -5 mm offset in the y direction to fix the error in that area. These offsets fluctuated slightly after each camera calibration and were likely due to small errors in the images as well as the grippers&#39; asymmetric design. &nbsp;</span></p><p class="c1 c21"><span class="c2">Due to the time constraints, we were not able to add a few features that would&rsquo;ve been useful. The first would have been a check to ensure the ball had been properly gripped. This would have been done by taking a new image and checking if the ball we had been intending to pick up had moved. The second feature would&rsquo;ve been picking a different home position based on the ball to grabs location and the ball&rsquo;s destination to cut down on the distance traveled and the time taken. </span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 356.00px;"><img alt="" src="images/image38.png" style="width: 624.00px; height: 356.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 356.00px;"><img alt="" src="images/image49.png" style="width: 624.00px; height: 356.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 349.33px;"><img alt="" src="images/image36.png" style="width: 624.00px; height: 349.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h1 class="c25" id="h.esh0xnhperca"><span class="c23 c14">Conclusion</span></h1><p class="c1 c21"><span class="c14">Finally, for the final project, our team developed an autonomous 3-DoF serial robotic arm to pick, place, and sort colored balls on a checkerboard. We implemented forward and inverse position kinematics, forward velocity kinematics, and computer vision concepts to achieve full functionality. Our system architecture consisted of a fisheye camera to take images of the checkerboard. From these images, our program filtered and segmented the image to detect the location of the colored balls. Once the locations were determined, the robot&rsquo;s ball selection algorithm consisted of choosing the closest ball and sorting it into a specific corner corresponding to the ball&rsquo;s color. We calibrated the camera, developed color masks using the HSV color space, and implemented segmentation to complete the computer vision functionality. We also built a state machine to handle the actions of the robot, as it can continuously pick up balls in its field of view until there are no balls left to be sorted. </span><hr style="page-break-before:always;display:none;"></p><h1 class="c25" id="h.2s810e84megh"><span class="c23 c14">Team Members&rsquo; Contributions</span></h1><p class="c0"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 600.00px; height: 371.00px;"><img alt="" src="images/image45.png" style="width: 600.00px; height: 371.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2"></span></p><p class="c17"><span class="c2">Each member contributed equally to the completion of this lab. Therefore, each team member has 33.3 points!</span></p><p class="c5"><span class="c2"></span></p><h2 class="c10 c13" id="h.c850b8nn4u1f"><span class="c6"></span></h2><h2 class="c10 c13" id="h.y8538tykp2h2"><span class="c6"></span></h2><h2 class="c10 c13" id="h.4xc4n9j9lazo"><span class="c6"></span></h2><h2 class="c10 c13" id="h.eggesije4u9a"><span class="c6"></span></h2><h2 class="c10 c13" id="h.1zlgty4z99da"><span class="c6"></span></h2><h2 class="c10" id="h.vptekvo6bgj4"><span class="c6">Table of Contributions</span></h2><a id="t.96918b23edb44b285c78104c839fbb45fb4d5546"></a><a id="t.3"></a><table class="c19"><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">Ashley</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">Abby</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">Cristobal</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Code Development and Testing</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Introduction</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Development and Implementation</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Results</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Write-up of Results</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Discussion</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Conclusion</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Video Filming/Editing</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3 c34"><span class="c2"></span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr><tr class="c29"><td class="c18" colspan="1" rowspan="1"><p class="c32"><span class="c2">Editing/Polishing of Report</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c3"><span class="c2">X</span></p></td></tr></table><p class="c0"><span class="c2"></span></p><div><p class="c1 c9"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1 c9"><span class="c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p></div></body></html>